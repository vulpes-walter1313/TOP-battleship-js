!function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,a;return r=t,a=[{key:"cleanElement",value:function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}},{key:"insertAfter",value:function(e,t){e.appendChild(t)}}],null&&e(r.prototype,null),a&&e(r,a),t}();function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=t,this.name=r,this.hits=[],this.sunk=!1}var t,a;return t=e,(a=[{key:"hit",value:function(e){this.hits.push(e)}},{key:"isSunk",value:function(){return this.hits.length===this.length&&(this.sunk=!0,!0)}}])&&r(t.prototype,a),e}();function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=e.createBoard(),this.ships={}}var t,r,o;return t=e,o=[{key:"createBoard",value:function(){for(var e=[],t=0;t<10;t++){for(var r=[],a=0;a<10;a++)r.push({hasShip:!1,hasBeenShot:!1});e.push(r)}return e}}],(r=[{key:"areAllShipsSunk",value:function(){var e=[];if(0===Object.keys(this.ships).length)return!1;for(var t in this.ships)e.push(this.ships[t].isShipSunk);return!!e.every((function(e){return!0===e}))}},{key:"placeShip",value:function(e,t){if(!this.isPlacementValid([t[0],t[1]],e.length,t[2]))throw new Error("Placement is invalid");if(this.ships[e.name]={ship:e,isShipSunk:!1,locations:[]},"x"===t[2])for(var r=t[1];r<t[1]+e.length;r++)this.board[t[0]][r].hasShip=!0,this.board[t[0]][r].shipName=e.name,this.ships[e.name].locations.push([t[0],r]);else if("y"===t[2])for(var a=t[0],n=0;n<e.length;n++)this.board[a][t[1]].hasShip=!0,this.board[a][t[1]].shipName=e.name,a++,this.ships[e.name].locations.push([a,t[1]])}},{key:"isPlacementValid",value:function(e,t,r){var a=!0;if("x"===r){for(var n=e[1];n<e[1]+t;n++)if(void 0===this.board[e[0]][n]||!0===this.board[e[0]][n].hasShip){a=!1;break}}else if("y"===r)for(var i=e[0];i<e[0]+t;i++)if(void 0===this.board[i]||!0===this.board[i][e[1]].hasShip){a=!1;break}return a}},{key:"receiveAttack",value:function(e){var t,r,a=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],o=a[1];return!1===this.board[i][o].hasBeenShot?(this.registerAttack(i,o),!0===this.board[i][o].hasShip?(this.registerShipHit(i,o),"hit"):"miss"):"Cell has already been shot"}},{key:"registerAttack",value:function(e,t){this.board[e][t].hasBeenShot=!0}},{key:"registerShipHit",value:function(e,t){var r=this.board[e][t].shipName;this.ships[r].ship.hit([e,t]),!0===this.ships[r].ship.isSunk()&&(this.ships[r].isShipSunk=!0)}},{key:"computerPlaceShips",value:function(){var e=this;[["carrier",5],["battleship",4],["cruiser",3],["submarine",3],["destroyer",2]].map((function(e){return new a(e[1],e[0])})).forEach((function(t){for(var r=!1;!r;){var a=e.randomPointGen();e.isPlacementValid([a[0],a[1]],t.length,a[2])&&(e.placeShip(t,a),r=!0)}}))}},{key:"randomPointGen",value:function(){return[Math.floor(9*Math.random()+0),Math.floor(9*Math.random()+0),0===Math.floor(2*Math.random())?"x":"y"]}},{key:"resetBoard",value:function(){this.board=e.createBoard()}}])&&i(t.prototype,r),o&&i(t,o),e}();function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function l(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t||"computer",this.gameboard=new o,this.enemyBoard=new o,this.validMoves=e.resetMoves()}var t,r,a;return t=e,a=[{key:"resetMoves",value:function(){for(var e=[],t=0;t<10;t++)for(var r=0;r<10;r++){var a=[t,r];e.push(a)}return e}}],(r=[{key:"computerMove",value:function(){var e,t,r=Math.floor(Math.random()*this.validMoves.length),a=(e=this.validMoves[r],t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=a[0],i=a[1];return this.validMoves.splice(r,1),[n,i]}},{key:"randomNumGen",value:function(){return Math.floor(9*Math.random()+0)}}])&&l(t.prototype,r),a&&l(t,a),e}();function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=document.querySelector(t)}var r,n;return r=e,(n=[{key:"run",value:function(){this.renderStart()}},{key:"renderStart",value:function(){t.cleanElement(this.app);var e=document.createElement("div");e.classList.add("player-info");var r=document.createElement("h2");r.textContent="Set your name";var a=document.createElement("form");a.classList.add("player-form"),a.innerHTML='\n      <label for="name">Name: </label>\n      <input type="text" name="name">\n    ';var n=this.nameSubmission.bind(this);a.addEventListener("submit",n),t.insertAfter(e,r),t.insertAfter(e,a),t.insertAfter(this.app,e)}},{key:"nameSubmission",value:function(){var e=document.querySelector(".player-form"),t=new FormData(e).get("name");this.player1=new c(t),this.computer=new c,this.setPlayerShips()}},{key:"setPlayerShips",value:function(){var e=this;t.cleanElement(this.app);var r=document.createElement("div");r.classList.add("set-player-ships-container");var n=document.createElement("h2");n.textContent="Place your Carrier",n.classList.add("placement-shipname-display");var i=document.createElement("button");i.setAttribute("type","button"),i.textContent="Rotate",i.setAttribute("data-axis","x"),i.addEventListener("click",(function(){var e=document.querySelectorAll(".placement-grid-cell"),t=document.querySelector(".placement-axis-display"),r=document.querySelector(".set-player-ships-container button");"x"===r.dataset.axis?r.dataset.axis="y":"y"===r.dataset.axis&&(r.dataset.axis="x"),e.forEach((function(e){"x"===r.dataset.axis?(e.setAttribute("data-orientation","x"),t.textContent="Placing in X-axis"):(e.setAttribute("data-orientation","y"),t.textContent="Placing in Y-axis")}))}));var o=document.createElement("p");o.classList.add("placement-axis-display"),o.textContent="Placing in X-axis";var s=document.createElement("div");s.classList.add("placement-grid");var l=[["carrier",5],["battleship",4],["cruiser",3],["submarine",3],["destroyer",2]],c=l.shift();this.buildPlacementGrid(s,c),s.addEventListener("click",(function(t){if(t.target.classList.contains("placement-grid-cell"))if("undefined"!=t.target.dataset.shipname){var r=t.target.dataset.shipname,n=parseInt(t.target.dataset.shiplength),i=new a(n,r),o=[parseInt(t.target.dataset.outeri),parseInt(t.target.dataset.inneri),t.target.dataset.orientation];try{if(e.player1.gameboard.placeShip(i,o),0!=l.length){var s=l.shift(),c=document.querySelector(".placement-grid");e.buildPlacementGrid(c,s),e.updatePlacementShipName()}else e.computer.gameboard.computerPlaceShips(),console.log(e.computer.gameboard),e.startTheGame()}catch(e){console.log(e)}}else console.log("no more ships to place")})),s.addEventListener("mouseover",(function(e){e.target.classList.contains("placement-grid-cell")&&function(){var t=e.target,r=Array.from(document.querySelectorAll(".placement-grid-cell")),a=t.dataset.orientation,n=parseInt(t.dataset.shiplength),i=parseInt(t.dataset.outeri),o=parseInt(t.dataset.inneri);if("x"===a){for(var s=[],l=function(e){var t=r.find((function(t){return t.dataset.outeri===i.toString()&&t.dataset.inneri===e.toString()}));t&&s.push(t)},c=o;c<o+n;c++)l(c);s.forEach((function(e){return e.classList.add("hovered")}))}else if("y"===a){for(var u=[],d=function(e){var t=r.find((function(t){return t.dataset.outeri===e.toString()&&t.dataset.inneri===o.toString()}));t&&u.push(t)},h=i;h<i+n;h++)d(h);u.forEach((function(e){return e.classList.add("hovered")}))}}()})),s.addEventListener("mouseout",(function(e){document.querySelectorAll(".placement-grid-cell").forEach((function(e){return e.classList.remove("hovered")}))})),t.insertAfter(r,n),t.insertAfter(r,i),t.insertAfter(r,o),t.insertAfter(r,s),t.insertAfter(this.app,r)}},{key:"updatePlaceShipGridAttributes",value:function(e,t){document.querySelectorAll(".placement-grid-cell").forEach((function(r){r.setAttribute(e,t)}))}},{key:"updatePlacementShipName",value:function(){var e=document.querySelector(".placement-grid-cell").dataset.shipname,t=e.slice(0,1).toUpperCase()+e.slice(1);document.querySelector(".placement-shipname-display").textContent="Place your ".concat(t)}},{key:"buildPlacementGrid",value:function(e,r){t.cleanElement(e);var a,n=document.querySelector(".set-player-ships-container button");a=n?n.dataset.axis:"x";for(var i=0;i<10;i++)for(var o=0;o<10;o++){var s=document.createElement("div");s.classList.add("placement-grid-cell"),s.setAttribute("data-outeri",i),s.setAttribute("data-inneri",o),s.setAttribute("data-orientation",a),s.setAttribute("data-shipname",r[0]),s.setAttribute("data-shiplength",r[1]),!0===this.player1.gameboard.board[i][o].hasShip&&s.classList.add("ship-placed"),t.insertAfter(e,s)}}},{key:"startTheGame",value:function(){var e=this;t.cleanElement(this.app);var r=document.createElement("div");r.classList.add("gameplay-display-container");var a=document.createElement("div");a.classList.add("player1-display-wrapper");var n=document.createElement("h2");n.textContent="".concat(this.player1.name);var i=document.createElement("div");i.classList.add("gameplay-player1-board"),this.buildGameboard(i,this.player1.gameboard.board);var o=document.createElement("div");o.classList.add("computer-display-wrapper");var s=document.createElement("h2");s.textContent="".concat(this.computer.name);var l=document.createElement("div");l.classList.add("gameplay-computer-board"),this.buildGameboard(l,this.player1.enemyBoard.board),l.addEventListener("mouseover",(function(e){e.target.classList.contains("gameboard-grid-cell")&&e.target.classList.add("cell-hovered")})),l.addEventListener("mouseout",(function(e){e.target.classList.contains("gameboard-grid-cell")&&e.target.classList.remove("cell-hovered")})),l.addEventListener("click",(function(t){var r=[t.target.dataset.outeri,t.target.dataset.inneri];e.playerTurn(r)})),t.insertAfter(a,n),t.insertAfter(a,i),t.insertAfter(o,s),t.insertAfter(o,l),t.insertAfter(r,a),t.insertAfter(r,o),t.insertAfter(this.app,r)}},{key:"buildGameboard",value:function(e,r){t.cleanElement(e);for(var a=0;a<10;a++)for(var n=0;n<10;n++){var i=document.createElement("div");i.classList.add("gameboard-grid-cell"),i.setAttribute("data-outeri",a),i.setAttribute("data-inneri",n),!0===r[a][n].hasShip&&i.classList.add("gameboard-ship-placed"),!0===r[a][n].hasBeenShot&&!0===r[a][n].hasShip?i.classList.add("grid-cell-hit"):!0===r[a][n].hasBeenShot&&!1===r[a][n].hasShip&&i.classList.add("grid-cell-miss"),t.insertAfter(e,i)}}},{key:"playerTurn",value:function(e){var t,r,a=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=a[0],i=a[1];if(console.log(n,i),!0!==this.player1.enemyBoard.board[n][i].hasBeenShot){var o=this.computer.gameboard.receiveAttack([n,i]);if(this.player1.enemyBoard.receiveAttack([n,i]),"hit"===o){this.player1.enemyBoard.board[n][i].hasShip=!0;var s=document.querySelector(".gameplay-computer-board");this.buildGameboard(s,this.player1.enemyBoard.board)}else if("miss"===o){var l=document.querySelector(".gameplay-computer-board");this.buildGameboard(l,this.player1.enemyBoard.board)}if(this.computer.gameboard.areAllShipsSunk())this.winnerAnnoucement(this.player1);else{var c=this.computer.computerMove();this.player1.gameboard.receiveAttack(c);var d=document.querySelector(".gameplay-player1-board");this.buildGameboard(d,this.player1.gameboard.board)}this.player1.gameboard.areAllShipsSunk()&&this.winnerAnnoucement(this.computer)}}},{key:"winnerAnnoucement",value:function(e){var r=this,a=document.createElement("div");a.classList.add("winner-banner-container");var n=document.createElement("div");n.classList.add("winner-banner");var i=document.createElement("p");i.textContent="".concat(e.name," Won!!!");var o=document.createElement("button");o.setAttribute("type","button"),o.textContent="Play Again",o.addEventListener("click",(function(){r.restartGame()})),n.appendChild(i),n.appendChild(o),a.appendChild(n),t.insertAfter(this.app,a)}},{key:"restartGame",value:function(){this.player1.gameboard.resetBoard(),this.player1.enemyBoard.resetBoard(),this.computer.gameboard.resetBoard(),this.computer.enemyBoard.resetBoard(),this.computer.validMoves=c.resetMoves(),this.setPlayerShips()}}])&&d(r.prototype,n),e}();console.log("i'm in..."),document.addEventListener("DOMContentLoaded",(function(){new h("#app").run()}))}();
//# sourceMappingURL=main.js.map